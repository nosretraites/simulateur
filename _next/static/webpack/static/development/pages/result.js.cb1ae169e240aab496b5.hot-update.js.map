{"version":3,"file":"static/webpack/static/development/pages/result.js.cb1ae169e240aab496b5.hot-update.js","sources":["webpack:///./pages/result.js"],"sourcesContent":["import React, { useContext } from \"react\";\nimport { FacebookShareButton, TwitterShareButton } from 'react-share';\nimport Head from \"next/head\";\n\nimport { Context } from \"../components/context\";\nimport Pie from \"../components/pie\";\nimport SocialIcon from \"../components/socialIcon\";\n\nconst SEO_TITLE = 'Resultats du simulateur de retraite';\nconst BASE_SOCIAL_URL = 'https://nosretraites.github.io/simulateur';\nconst SOCIAL_TITLE = 'Voici ce que je toucherai comme retraite avec la reforme macron';\nconst SOCIAL_DESCRIPTION = 'Simulateur de retraite du collectif nos retraites';\nconst SOCIAL_IMAGE = `${BASE_SOCIAL_URL}/logo_collectif.png`;\n\nconst Result = () => {\n  const { result } = useContext(Context);\n\n  const fullDataSet = JSON.parse(result.json)\n  const resProps = Object.keys(fullDataSet[0])\n\n  const past = parseInt(result.past)\n  const current = parseInt(result.current)\n  const data = [\n    {\n      id: \"result\",\n      label: \"result\",\n      value: current\n    },\n    {\n      id: \"other\",\n      label: \"other\",\n      value: 100 - current\n    }\n  ];\n\n  const baseData = [\n    {\n      id: \"result\",\n      label: \"result\",\n      value: past\n    },\n    {\n      id: \"other\",\n      label: \"other\",\n      value: 100 - past\n    }\n  ];\n\n  function format(key, value) {\n    if (key.startsWith('TR') || key.indexOf('pension') >= 0 || key.indexOf('retraite') >= 0 || key.indexOf('salaire') >= 0) {\n      return (Math.round(value*100) / 100).toLocaleString()\n    } else {\n      return value\n    }\n  }\n\n  return (\n    <div>\n      <Head>\n        <title>{SEO_TITLE}</title>\n        <meta property=\"og:type\" content=\"article\" />\n        <meta property=\"og:description\" content={SOCIAL_DESCRIPTION} />\n        <meta property=\"og:image\" content={SOCIAL_IMAGE} />\n\n        <meta name=\"twitter:card\" content=\"summary\" />\n        <meta name=\"twitter:description\" content={SOCIAL_DESCRIPTION} />\n      </Head>\n      <div className=\"results\">\n        <div className=\"result\">\n          <div>\n            <span className=\"label\">Une personne née en </span>\n            <span className=\"important\">1960</span>\n          </div>\n          <div>\n            <span className=\"label\">peut partir à la retraite à </span>\n            <span className=\"important\">65 ans</span>\n          </div>\n          <div className=\"chart-wrapper\">\n            <span className=\"label\">sa pension représentera </span>\n            <Pie\n              data={baseData}\n              label=\"de son dernier salaire\"\n            />\n          </div>\n        </div>\n        <div className=\"result\">\n          <div>\n            <span className=\"label\">Vous êtes né-e en </span>\n            <span className=\"important\">{result.naissance}</span>\n          </div>\n          <div>\n            <span className=\"label\">en partant à la retraite à </span>\n            <span className=\"important\">{result.age} ans</span>\n          </div>\n          <div className=\"chart-wrapper\">\n            <span className=\"label\">votre pension représentera </span>\n            <Pie\n              data={data}\n              label=\"de votre dernier salaire\"\n            />\n          </div>\n          <p className=\"label\">\n            Pour partir à la retraite à taux plein <br/>\n            il vous faudra travailler {result.delay} ans de plus !\n          </p>\n        </div>\n      </div>\n\n      <table>\n        <thead>\n          <tr>\n            {resProps.map(name => (<th key={name}>{name.replace(/_neut/, '_n')}</th>))}\n          </tr>\n        </thead>\n        <tbody>\n        {fullDataSet.map(row => {\n          return (\n            <tr>\n             {resProps.map(name => (<td key={name}>{ format(name, row[name]) }</td>))}\n            </tr>\n            )\n        })}\n        </tbody>\n      </table>\n\n      <div className=\"social\">\n        <span className=\"text\">\n          Partagez les conséquences de la réforme des retraites :\n        </span>\n        <div className=\"social-buttons\">\n          <FacebookShareButton\n            url={BASE_SOCIAL_URL + '?' + new URLSearchParams(result)}\n            quote={SOCIAL_TITLE}\n          >\n            <SocialIcon name=\"facebook\" />\n          </FacebookShareButton>\n          <TwitterShareButton\n            url={BASE_SOCIAL_URL + '?' + new URLSearchParams(result)}\n            quote={SOCIAL_TITLE}\n          >\n            <SocialIcon name=\"twitter\" />\n          </TwitterShareButton>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Result;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAOA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;;;;A","sourceRoot":""}