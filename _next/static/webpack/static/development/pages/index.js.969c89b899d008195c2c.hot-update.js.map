{"version":3,"file":"static/webpack/static/development/pages/index.js.969c89b899d008195c2c.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport Router from \"next/router\";\nimport FA from 'react-fontawesome';\n\nimport { Context } from \"../components/context\";\nimport Input from '../components/input';\nimport Select from '../components/select';\n\nconst carrieres = [\n  { value: \"SMIC\", label: \"SMIC\" },\n  { value: \"COR1\", label: \"Cadre √† carri√®re sans interruption\" },\n  { value: \"COR2\", label: \"Non cadre √† carri√®re sans interruption\" },\n  { value: \"COR3\", label: \"Non cadre √† carri√®re interrompue par du ch√¥mage\" },\n  {\n    value: \"COR4\",\n    label: \"Non cadre avec une interruption de carri√®re pour enfant\"\n  }\n];\n\nconst SimpleForm = () => {\n  const { postSimpleForm, result, setResult } = useContext(Context);\n  const [pending, setPending] = useState(false);\n  const [timerMessage, setTimerMessage] = useState(false);\n\n  const formik = useFormik({\n    initialValues: {\n      naissance: result.naissance || 1984,\n      debut: result.debut || 22,\n      carriere: result.carriere || \"COR2\",\n      remuneration: result.remuneration || 0\n    },\n    onSubmit: values => {\n      setPending(true);\n      setTimerMessage(\n        \"üí£ tic. tac. tic. tac. (10 secondes environ pour le moment üòÅ)\"\n      );\n\n      postSimpleForm(values)\n        .then(data => {\n          const state = {\n            ...data,\n            ...formik.values\n          }\n          setResult(state);\n          Router.push(`/result?${new URLSearchParams(state)}`);\n        })\n        .finally(() => {\n          setPending(false);\n          setTimerMessage(false);\n        });\n    }\n  });\n\n  return (\n    <form onSubmit={formik.handleSubmit}>\n      <Input\n        label=\"Ann√©e de naissance\"\n        name=\"naissance\"\n        type=\"number\"\n        min=\"1930\"\n        max=\"2020\"\n        step=\"1\"\n        onChange={formik.handleChange}\n        value={formik.values.naissance}\n      />\n      <Input\n        label=\"√Çge de d√©but de carri√®re\"\n        name=\"debut\"\n        type=\"number\"\n        min=\"12\"\n        max=\"77\"\n        step=\"1\"\n        onChange={formik.handleChange}\n        value={formik.values.debut}\n      />\n      <Input\n        label=\"R√©muneration mensuelle brute en 2019\"\n        name=\"remuneration\"\n        icon=\"euro\"\n        type=\"number\"\n        min=\"1\"\n        step=\"10\"\n        width=\"250px\"\n        onChange={formik.handleChange}\n        value={formik.values.remuneration}\n      />\n      <Select\n        name=\"carriere\"\n        label=\"Carri√®re\"\n        options={carrieres}\n        value={formik.values.carriere}\n        onChange={formik.handleChange}\n      />\n      <div className=\"submit-wrapper\">\n        <button className=\"submit\" type=\"submit\" disabled={pending}>\n          {!pending && 'Acc√©der au carnage'}\n          {pending && <FA name=\"spinner\" spin={true} />}\n        </button>\n\n        {pending && timerMessage && <div>{timerMessage}</div>}\n      </div>\n    </form>\n  );\n};\n\nexport default SimpleForm;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAFA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAIA;AAEA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AA1BA;AA6BA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;;;;A","sourceRoot":""}